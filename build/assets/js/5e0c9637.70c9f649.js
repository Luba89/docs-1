"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8925],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return u}});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(a),u=n,k=d["".concat(s,".").concat(u)]||d[u]||m[u]||o;return a?r.createElement(k,i(i({ref:t},c),{},{components:a})):r.createElement(k,i({ref:t},c))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var p=2;p<o;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},31299:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return m}});var r=a(87462),n=a(63366),o=(a(67294),a(3905)),i=["components"],l={sidebar_position:16},s="ToDo App using CF Workers & Macrometa GDN",p={unversionedId:"demos/todo-app-cfworkers",id:"demos/todo-app-cfworkers",title:"ToDo App using CF Workers & Macrometa GDN",description:"Overview",source:"@site/docs/demos/todo-app-cfworkers.md",sourceDirName:"demos",slug:"/demos/todo-app-cfworkers",permalink:"/docs/demos/todo-app-cfworkers",tags:[],version:"current",sidebarPosition:16,frontMatter:{sidebar_position:16},sidebar:"tutorialSidebar",previous:{title:"Working with Macrometa GDN and Cloudflare Workers",permalink:"/docs/demos/cloudflare-workers"},next:{title:"Dynamo Mode",permalink:"/docs/demos/dynamo"}},c={},m=[{value:"Overview",id:"overview",level:2},{value:"Steps",id:"steps",level:2},{value:"Prior art",id:"prior-art",level:2}],d={toc:m};function u(e){var t=e.components,a=(0,n.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"todo-app-using-cf-workers--macrometa-gdn"},"ToDo App using CF Workers & Macrometa GDN"),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"This tutorial demonstrates low latency stateful data serving and edge functions utilizing Cloudflare Workers and Macrometa Global Data Network (GDN)."),(0,o.kt)("p",null,"The serverless edge function runs on CloudFlare as ",(0,o.kt)("a",{parentName:"p",href:"https://workers.cloudflare.com/"},"Worker")," serving data with low latency from Macrometa's GDN (",(0,o.kt)("a",{parentName:"p",href:"http://www.macrometa.com"},"www.macrometa.com"),")"),(0,o.kt)("p",null,"You can try the ",(0,o.kt)("inlineCode",{parentName:"p"},"ToDo List App")," here - ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://todo.macrometa.io/"},"Demo"))),(0,o.kt)("p",null,"Depending on where you are (i.e., city, state, country), your request will be routed to the closest CloudFlare Edge PoP where the serverless function will run to generate the HTML and serve data (",(0,o.kt)("inlineCode",{parentName:"p"},"puts"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"gets"),") from the closest Macrometa GDN PoP."),(0,o.kt)("p",null,"In contrast to current web architectures which are centralized in nature (i.e., backend lambdas, functions and database run in one single region), this example app exploits global distribution and exeuction of functions (CF workers) and stateful globally distributed data (Macrometa GDN). The end to end latency should be no more than ",(0,o.kt)("inlineCode",{parentName:"p"},"75ms")," per request for serving database requests via the function to your browser."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"To measure data serving time (i.e., end-to-end latency), you can use the developer tools in chrome browser. It will show the time taken from a ",(0,o.kt)("inlineCode",{parentName:"p"},"Click in Gui")," --\x3e ",(0,o.kt)("inlineCode",{parentName:"p"},"Edge function (on CloudFlare)")," --\x3e ",(0,o.kt)("inlineCode",{parentName:"p"},"KV store on Macrometa's Global Data Network (GDN) service")," --\x3e ",(0,o.kt)("inlineCode",{parentName:"p"},"Edge function (on CloudFlare)")," --\x3e ",(0,o.kt)("inlineCode",{parentName:"p"},"Gui"),"."))),(0,o.kt)("p",null,"Macrometa's global data service (GDN) offers ",(0,o.kt)("inlineCode",{parentName:"p"},"Key Value"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Dynamo Mode"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"DocumentDB"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Graphs"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Search"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Streams")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Stream Processing")," as API services that can be incorporated into CloudFlare workers to enable sophisticated, data intensive apps that require low latency, high levels of scalability and most importantly ",(0,o.kt)("em",{parentName:"p"},"consistent, stateful data"),"."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Difference between CloudFlare K/V and Macrometa:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"CloudFlare K/V is designed for use cases that frequently read and write very infrequently (only 1 write per second per key  ",(0,o.kt)("a",{parentName:"p",href:"https://developers.cloudflare.com/workers/platform/limits"},"https://developers.cloudflare.com/workers/platform/limits")," ).")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Macrometa offers an adaptive consistency model ranging from ",(0,o.kt)("inlineCode",{parentName:"p"},"strong consistency to causal consistency"),".  Macrometa offers a multi-model interface i.e., it supports ",(0,o.kt)("inlineCode",{parentName:"p"},"KV"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"DynamoDB compatible API"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Docs"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Graphs"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Search"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Streams")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"Stream Processing"),".  This examples uses the KV APi."))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Macrometa does not run on CloudFLare PoPs - it runs in datacenters and PoPs with close adjacency to CloudFlare PoPs - there is some additional network latency between a where a worker executes and the calls it makes to the Macrometa (a few single digit milliseconds) but overall Workers and Macrometa are 3x faster than Worker and Worker K/V."))),(0,o.kt)("h2",{id:"steps"},"Steps"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Clone the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Macrometacorp/tutorial-cloudflare-todo"},"github repository")," and run ",(0,o.kt)("inlineCode",{parentName:"p"},"npm install")),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/Macrometacorp/tutorial-cloudflare-todo.git\nnpm install\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Install ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cloudflare/wrangler"},"Wrangler")," on your machine.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Update API_KEY in ",(0,o.kt)("inlineCode",{parentName:"p"},"wrangler.toml")," file"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'vars = { API_KEY="xxxx", COLLECTION_NAME="todo" }\n'))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"To ",(0,o.kt)("inlineCode",{parentName:"p"},"Preview Run")," the project with live reload"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"wrangler preview --watch\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("a",{parentName:"p",href:"https://developers.cloudflare.com/workers/tooling/wrangler/commands#config"},"Configure")," your global Cloudflare user. This is an interactive command that will prompt you for your API token."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"wrangler config [--api-key]\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("a",{parentName:"p",href:"https://developers.cloudflare.com/workers/tooling/wrangler/commands/#publish"},"Publish")," your Worker to Cloudflare. Several keys in your ",(0,o.kt)("inlineCode",{parentName:"p"},"wrangler.toml")," determine whether you are publishing to a ",(0,o.kt)("inlineCode",{parentName:"p"},"workers.dev")," subdomain or your own registered domain, proxied through Cloudflare."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"wrangler publish [--env $ENVIRONMENT_NAME]\n")))),(0,o.kt)("p",null,"Further documentation for Wrangler can be found ",(0,o.kt)("a",{parentName:"p",href:"https://developers.cloudflare.com/workers/tooling/wrangler"},"here"),"."),(0,o.kt)("h2",{id:"prior-art"},"Prior art"),(0,o.kt)("p",null,"This simple TO DO app is based on a tutorial by cloudflare (CF) on using ",(0,o.kt)("a",{parentName:"p",href:"https://workers.cloudflare.com/"},"CF Workers")," and ",(0,o.kt)("a",{parentName:"p",href:"https://developers.cloudflare.com/workers/reference/storage"},"CF KV Store")))}u.isMDXComponent=!0}}]);