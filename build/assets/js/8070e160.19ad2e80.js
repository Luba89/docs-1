"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2651],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,k=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(k,i(i({ref:t},p),{},{components:n})):a.createElement(k,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},62257:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],l={sidebar_position:1},s="Quickstart",u={unversionedId:"quickstart",id:"quickstart",title:"Quickstart",description:"Address Book App Quickstart",source:"@site/docs/quickstart.md",sourceDirName:".",slug:"/quickstart",permalink:"/docs/quickstart",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Introduction",permalink:"/docs/essentials/overview"}},p={},c=[{value:"Address Book App <em>Quickstart</em>",id:"address-book-app-quickstart",level:3},{value:"Step 1: Create a Collection",id:"step-1-create-a-collection",level:2},{value:"Step 2: Add some data to your new collection and query it",id:"step-2-add-some-data-to-your-new-collection-and-query-it",level:2},{value:"Step 3: Save the Query",id:"step-3-save-the-query",level:2},{value:"Step 4: Execute the Query Worker",id:"step-4-execute-the-query-worker",level:2},{value:"Next Steps",id:"next-steps",level:2}],d={toc:c};function m(e){var t=e.components,l=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"quickstart"},"Quickstart"),(0,o.kt)("h3",{id:"address-book-app-quickstart"},"Address Book App ",(0,o.kt)("em",{parentName:"h3"},"Quickstart")),(0,o.kt)("p",null,"Let\u2019s take ",(0,o.kt)("strong",{parentName:"p"},"5 minutes")," to create a stateful-serverless backend for a simple Address Book. It's going to run globally distributed with local read-write latencies around 50ms."),(0,o.kt)("p",null,"We are going to walk through 4 steps:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Create a collection and add some data to it."),(0,o.kt)("li",{parentName:"ul"},"Query that data."),(0,o.kt)("li",{parentName:"ul"},"Save the query (A saved query is called a Query Worker)."),(0,o.kt)("li",{parentName:"ul"},"Execute the Query Worker!")),(0,o.kt)("p",null,"First things first, if you don't already have a Macrometa account go create a ",(0,o.kt)("a",{parentName:"p",href:"https://auth.paas.macrometa.io/signup"},"free")," one and mosey on back."),(0,o.kt)("h2",{id:"step-1-create-a-collection"},"Step 1: Create a Collection"),(0,o.kt)("p",null,"Let\u2019s start by clicking the ",(0,o.kt)("inlineCode",{parentName:"p"},"COLLECTIONS")," tab in the left nav and then ",(0,o.kt)("inlineCode",{parentName:"p"},"New Collection")," on the right. Select the ",(0,o.kt)("inlineCode",{parentName:"p"},"Document")," option, give it the name ",(0,o.kt)("inlineCode",{parentName:"p"},"addresses"),", and save it."),(0,o.kt)("p",null,"Note: The collection ",(0,o.kt)("inlineCode",{parentName:"p"},"addresses")," that you just created is now distributed to every location in the fabric!"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"create-collection",src:n(23705).Z,width:"3772",height:"2040"})),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"live",live:!0},'\n  function MyPlayground(props) {\n\n    function CreateCollection(response) {\n      var url = "https://api-gdn.paas.macrometa.io/_fabric/_system/_api/collection";\n\n      var xhr = new XMLHttpRequest();\n      xhr.open("POST", url);\n\n      xhr.setRequestHeader("accept", "application/json");\n      xhr.setRequestHeader("Content-Type", "application/json");\n      xhr.setRequestHeader("Authorization", "bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjEuNjQ0NTE2MzA2ODU4MTIzN2UrNiwiZXhwIjoxNjQ0NTU5NTA2LCJpc3MiOiJtYWNyb21ldGEiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJyb290Iiwic3ViIjoianVzdGluX21hY3JvbWV0YS5jb20iLCJ0ZW5hbnQiOiJqdXN0aW5fbWFjcm9tZXRhLmNvbSJ9.10HsLXmDeHzWTvoYCa1msXmhxOPp3iISlsQlhcJux90=");\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            console.log(xhr.status);\n            console.log(xhr.responseText);\n        }};\n\n      var data = `{\n        "isSystem": true,\n        "name": "addresses",\n        "type": 2,\n        "stream": true\n      }`;\n\n      xhr.send(data);\n      \n      xhr.onload = (e) => {\n      alert(xhr.response);\n      }\n    }\n\n  return (\n    <div>\n      <button onClick={CreateCollection}>Click me</button>\n    </div>\n  );\n}\n')),(0,o.kt)("h2",{id:"step-2-add-some-data-to-your-new-collection-and-query-it"},"Step 2: Add some data to your new collection and query it"),(0,o.kt)("p",null,"Now, click the ",(0,o.kt)("inlineCode",{parentName:"p"},"QUERIES")," tab in the left nav to open the ",(0,o.kt)("inlineCode",{parentName:"p"},"C8QL")," query editor. Copy and paste the query below into the editor and click ",(0,o.kt)("inlineCode",{parentName:"p"},"Run Query")," a couple times. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},'// Query to insert addresses\nFOR persons IN [ \n  { firstname: "Captain", lastname: "Nemo", email: "cpnemo@gnautilus.com" },\n  { firstname: "Pierre", lastname: "Aronnax", email: "pierre@asoc.org" },\n  { firstname: "Ned", lastname: "Land", email: "ned@nature.org" },\n  { firstname: "Cyrus", lastname: "Smith", email: "cycy@laborrights.org" },\n  { firstname: "Tom", lastname: "Ayrton", email: "tommy@water.org" },\n  { firstname: "Jules", lastname: "Verne", email: "j.garcia@en-julesverne.nantesmetropole.fr" } \n  ]\n  INSERT persons INTO addresses\n')),(0,o.kt)("p",null,"Your ",(0,o.kt)("inlineCode",{parentName:"p"},"Query Result")," will be empty brackets, but if you click on ",(0,o.kt)("inlineCode",{parentName:"p"},"Profile")," button you can checkout what just happened along with some performance details. Your data was just written to the location you're currently logged into and replicated across all of the nodes in your fabric."),(0,o.kt)("p",null,"Now, let's query the data you just added to your collection. Copy the below query and replace the ",(0,o.kt)("inlineCode",{parentName:"p"},"INSERT")," query currently in the editor with it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"FOR docs IN addresses RETURN docs \n")),(0,o.kt)("p",null,"You should see the data you just saved returned."),(0,o.kt)("p",null,"Ok, now we are going to save this query. Saving it will turn it into a ",(0,o.kt)("inlineCode",{parentName:"p"},"Query Worker"),"."),(0,o.kt)("h2",{id:"step-3-save-the-query"},"Step 3: Save the Query"),(0,o.kt)("p",null,"Click the ",(0,o.kt)("inlineCode",{parentName:"p"},"Save Query")," button and name the saved query ",(0,o.kt)("inlineCode",{parentName:"p"},"getAddresses")),(0,o.kt)("p",null,"Now, in ",(0,o.kt)("strong",{parentName:"p"},"around 50ms"),", you have a globally distributed stateful-serverless endpoint."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"dashboard",src:n(3155).Z,width:"2306",height:"748"})),(0,o.kt)("h2",{id:"step-4-execute-the-query-worker"},"Step 4: Execute the Query Worker"),(0,o.kt)("p",null,"Now that you've saved the query click on the ",(0,o.kt)("inlineCode",{parentName:"p"},"API Usage")," button, and we automatically generate a Query Worker (Exactly like a serverless function, but a save query instead of a function)!"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"create-query-worker",src:n(63804).Z,width:"3766",height:"2028"})),(0,o.kt)("h2",{id:"next-steps"},"Next Steps"),(0,o.kt)("p",null,"Nice job you totally rocked that quickstart! "),(0,o.kt)("p",null,"Now let's build out the ",(0,o.kt)("em",{parentName:"p"},"REST")," of our CRUD API. Just create a ",(0,o.kt)("inlineCode",{parentName:"p"},"Query Worker")," for each of these queries."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"SaveContact")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT {firstname:@firstName,\n        lastname:@lastName,\n        email:@email} \nINTO addresses\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"ReadContact")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"FOR entry \nIN addresses \nRETURN entry\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"RemoveContact")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"REMOVE @_key \nIN addresses\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"UpdateContact")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE @_key WITH { firstname:@firstName, \n                    lastname:@lastName, \n                    email:@email} \nIN addresses\n")),(0,o.kt)("p",null,"Sweet, so now you have a full functional API for your app. ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Macrometacorp/tutorial-addressbook-restql"},"We made a front-end for you to take your new backend for a spin"),"."),(0,o.kt)("p",null,"Now that you've build your app, full stack, you can dig into the docs and see all the rad things Macrometa can help you build >> ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"/docs/essentials/overview"},"Essentials"))," guide."))}m.isMDXComponent=!0},23705:function(e,t,n){t.Z=n.p+"assets/images/create-doc-view-556c67ff96651508106e8af9908cf49e.png"},3155:function(e,t,n){t.Z=n.p+"assets/images/dashboard-d7fd4b138a79ca22000e9ed62ef9a8af.png"},63804:function(e,t,n){t.Z=n.p+"assets/images/query-worker-2e344df59664f3514ebeda0aa00d49de.png"}}]);